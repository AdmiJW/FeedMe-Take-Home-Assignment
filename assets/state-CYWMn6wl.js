import{a1 as V,p as at,u as j,a as L,j as u,B as b,c as W,q as I,e as ct,v as it,f as lt,s as z,a2 as H,a3 as v,a4 as U,o as X,a5 as J,n as dt,m as $,X as d,a6 as G,a7 as ut,H as a}from"./index-CpFCx_4E.js";function mt(t,e){return t in e.breakpoints?V(e.breakpoints[t]):V(t)}function K(t,e){const s=t.map(r=>({value:r,px:mt(r,e)}));return s.sort((r,o)=>r.px-o.px),s}function B(t){return typeof t=="object"&&t!==null?"base"in t?t.base:void 0:t}var Q={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const gt={},ft=W((t,{radius:e,color:s,gradient:r,variant:o,size:i,autoContrast:g})=>{const n=t.variantColorResolver({color:s||t.primaryColor,theme:t,gradient:r,variant:o||"filled",autoContrast:g});return{root:{"--badge-height":I(i,"badge-height"),"--badge-padding-x":I(i,"badge-padding-x"),"--badge-fz":I(i,"badge-fz"),"--badge-radius":e===void 0?void 0:ct(e),"--badge-bg":s||o?n.background:void 0,"--badge-color":s||o?n.color:void 0,"--badge-bd":s||o?n.border:void 0,"--badge-dot-color":o==="dot"?it(s,t):void 0}}}),Y=at((t,e)=>{const s=j("Badge",gt,t),{classNames:r,className:o,style:i,styles:g,unstyled:n,vars:m,radius:p,color:A,gradient:h,leftSection:f,rightSection:c,children:l,variant:y,fullWidth:x,autoContrast:N,circle:rt,mod:ot,...nt}=s,O=L({name:"Badge",props:s,classes:Q,className:o,style:i,classNames:r,styles:g,unstyled:n,vars:m,varsResolver:ft});return u.jsxs(b,{variant:y,mod:[{block:x,circle:rt,"with-right-section":!!c,"with-left-section":!!f},ot],...O("root",{variant:y}),ref:e,...nt,children:[f&&u.jsx("span",{...O("section"),"data-position":"left",children:f}),u.jsx("span",{...O("label"),children:l}),c&&u.jsx("span",{...O("section"),"data-position":"right",children:c})]})});Y.classes=Q;Y.displayName="@mantine/core/Badge";const[pt,Z]=lt("Grid component was not found in tree"),C=(t,e)=>t==="content"?"auto":t==="auto"?"0rem":t?`${100/(e/t)}%`:void 0,T=(t,e,s)=>s||t==="auto"?"100%":t==="content"?"unset":C(t,e),_=(t,e)=>{if(t)return t==="auto"||e?"1":"auto"},q=(t,e)=>t===0?"0":t?`${100/(e/t)}%`:void 0;function yt({span:t,order:e,offset:s,selector:r}){var f;const o=z(),i=Z(),n=B(t)===void 0?12:B(t),m=H({"--col-order":(f=B(e))==null?void 0:f.toString(),"--col-flex-grow":_(n,i.grow),"--col-flex-basis":C(n,i.columns),"--col-width":n==="content"?"auto":void 0,"--col-max-width":T(n,i.columns,i.grow),"--col-offset":q(B(s),i.columns)}),p=v(o.breakpoints).reduce((c,l)=>{var y;return c[l]||(c[l]={}),typeof e=="object"&&e[l]!==void 0&&(c[l]["--col-order"]=(y=e[l])==null?void 0:y.toString()),typeof t=="object"&&t[l]!==void 0&&(c[l]["--col-flex-grow"]=_(t[l],i.grow),c[l]["--col-flex-basis"]=C(t[l],i.columns),c[l]["--col-width"]=t[l]==="content"?"auto":void 0,c[l]["--col-max-width"]=T(t[l],i.columns,i.grow)),typeof s=="object"&&s[l]!==void 0&&(c[l]["--col-offset"]=q(s[l],i.columns)),c},{}),h=K(v(p),o).filter(c=>v(p[c.value]).length>0).map(c=>({query:`(min-width: ${o.breakpoints[c.value]})`,styles:p[c.value]}));return u.jsx(U,{styles:m,media:h,selector:r})}var P={root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const ht={span:12},S=X((t,e)=>{const s=j("GridCol",ht,t),{classNames:r,className:o,style:i,styles:g,vars:n,span:m,order:p,offset:A,...h}=s,f=Z(),c=J();return u.jsxs(u.Fragment,{children:[u.jsx(yt,{selector:`.${c}`,span:m,order:p,offset:A}),u.jsx(b,{ref:e,...f.getStyles("col",{className:dt(o,c),style:i,classNames:r,styles:g}),...h})]})});S.classes=P;S.displayName="@mantine/core/GridCol";function vt({gutter:t,selector:e}){const s=z(),r=H({"--grid-gutter":$(B(t))}),o=v(s.breakpoints).reduce((n,m)=>(n[m]||(n[m]={}),typeof t=="object"&&t[m]!==void 0&&(n[m]["--grid-gutter"]=$(t[m])),n),{}),g=K(v(o),s).filter(n=>v(o[n.value]).length>0).map(n=>({query:`(min-width: ${s.breakpoints[n.value]})`,styles:o[n.value]}));return u.jsx(U,{styles:r,media:g,selector:e})}const xt={gutter:"md",grow:!1,columns:12},Bt=W((t,{justify:e,align:s,overflow:r})=>({root:{"--grid-justify":e,"--grid-align":s,"--grid-overflow":r}})),D=X((t,e)=>{const s=j("Grid",xt,t),{classNames:r,className:o,style:i,styles:g,unstyled:n,vars:m,grow:p,gutter:A,columns:h,align:f,justify:c,children:l,...y}=s,x=L({name:"Grid",classes:P,props:s,className:o,style:i,classNames:r,styles:g,unstyled:n,vars:m,varsResolver:Bt}),N=J();return u.jsxs(pt,{value:{getStyles:x,grow:p,columns:h},children:[u.jsx(vt,{selector:`.${N}`,...s}),u.jsx(b,{ref:e,...x("root",{className:N}),...y,children:u.jsx("div",{...x("inner"),children:l})})]})});D.classes=P;D.displayName="@mantine/core/Grid";D.Col=S;class At{constructor(){this.nextId=1}generateBot(){const e={id:this.nextId,name:`Bot ${this.nextId}`,createdAt:new Date,currentOrder:d(null)};return this.nextId++,e}generateBotAtom(){const e=this.generateBot();return d(e)}}const Ot=new At,w=d([]),Pt=()=>{const t=G(w);return()=>{const e=Ot.generateBotAtom();return t(s=>[...s,e]),st(e),e}},St=()=>{const t=G(w);return e=>{const s=k(e);return t(r=>r.filter(o=>o!==e)),a.get(s)&&F(s),e}},Dt=()=>{const[t,e]=ut(w);return()=>{if(t.length===0)return d(null);const s=t[t.length-1],r=k(s);return e(o=>o.slice(0,-1)),a.get(r)&&F(r),s}};function k(t){const e=a.get(t).currentOrder,s=a.get(e);return s&&(s.interval&&clearInterval(s.interval),a.set(e,{...s,processor:d(null),status:"PENDING",interval:null,progress:0,history:[...s.history,{type:"INTERUPPTED",timestamp:new Date,processor:t}]}),a.set(t,r=>({...r,currentOrder:d(null)}))),e}class wt{constructor(){this.nextId=1}createOrder(e,s=10){const r={id:this.nextId,type:e,status:"PENDING",processor:d(null),createdAt:new Date,completedAt:null,history:[],interval:null,duration:s,progress:0};return r.history.push({type:"CREATED",timestamp:new Date,processor:d(null)}),this.nextId++,r}createOrderAtom(e,s=10){const r=this.createOrder(e,s);return d(r)}}const Nt=new wt,E=d([]),R=d([]),It=d([]),tt=t=>{const s=G(t==="VIP"?R:E);return()=>{const r=Nt.createOrderAtom(t);return s(o=>[...o,r]),F(r),r}},Et=()=>tt("NORMAL"),Rt=()=>tt("VIP");function M(t){return a.get(t).find(e=>a.get(e).status==="PENDING")}function Ct(){return a.get(w).find(t=>{const e=a.get(t).currentOrder;return a.get(e)===null})}function et(t){return setInterval(()=>{const e=a.get(t);e.progress>=e.duration?bt(t):jt(t)},1e3)}function jt(t){a.set(t,e=>({...e,progress:e.progress+1}))}function bt(t){const e=a.get(t);clearInterval(e.interval);const s=e.type==="VIP"?R:E;a.set(s,r=>r.filter(o=>o!==t)),a.set(It,r=>[...r,t]),a.set(t,r=>({...r,status:"COMPLETED",completedAt:new Date,interval:null,history:[...r.history,{type:"COMPLETED",timestamp:new Date,processor:r.processor}]})),a.get(e.processor)&&(a.set(e.processor,r=>({...r,currentOrder:d(null)})),st(e.processor))}function st(t){const e=M(R)??M(E);return e?(a.set(t,s=>({...s,currentOrder:e})),a.set(e,s=>({...s,status:"PROCESSING",processor:t,history:[...s.history,{type:"ASSIGNED",timestamp:new Date,processor:t}],progress:0,interval:et(e)})),e):d(null)}function F(t){const e=Ct();return e?(a.set(e,s=>({...s,currentOrder:t})),a.set(t,s=>({...s,status:"PROCESSING",processor:e,history:[...s.history,{type:"ASSIGNED",timestamp:new Date,processor:e}],progress:0,interval:et(t)})),e):d(null)}export{Y as B,D as G,Rt as a,St as b,It as c,Pt as d,Dt as e,w as f,E as r,Et as u,R as v};
